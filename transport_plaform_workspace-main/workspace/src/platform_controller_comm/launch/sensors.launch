<?xml version="1.0" encoding="UTF-8"?>
<launch>

  <param name="debug_mode" type="bool" value="True"/>

  <include file="$(find platform_controller_comm)/launch/static_tf.launch"/>

  <!-- IMU Driver Node -->
  <node pkg="platform_controller_comm" type="IMUDriver.py" name="imu_driver" output="screen"/>

  <!-- Light Control Node -->
  <node pkg="platform_controller_comm" type="LightControl.py" name="light_control" output="screen"/>

  <!-- Ultrasonic Sensor Driver Node -->
  <node pkg="platform_controller_comm" type="USDriver.py" name="us_driver" output="screen"/>

  <!-- Motor Control Driver Node -->
  <!-- <node pkg="platform_controller_comm" type="MotorsDriver.py" name="main_motor_driver" output="screen"/> -->

  <!-- Lidar Driver Node -->
  <node name="rplidarNode"          pkg="rplidar_ros"  type="rplidarNode" output="screen">
    <param name="serial_port"         type="string" value="/dev/rp_lidar"/>
    <param name="serial_baudrate"     type="int"    value="256000"/>
    <param name="frame_id"            type="string" value="laser_frame"/>
    <param name="inverted"            type="bool"   value="false"/>
    <param name="angle_compensate"    type="bool"   value="true"/>
  </node>


  <!-- GNSS node -->
  <arg name="param_file_name"   default="c94_m8p_rover"     doc="name of param file, e.g. rover" />
  <arg name="param_file_dir"      doc="directory to look for $(arg param_file_name).yaml"
                                  default="$(find ublox_gps)/config" />

  <arg name="node_name"           doc="name of this node"
                                  default="ublox" />
  <arg name="output"              default="screen" />
  <arg name="respawn"             default="true" />
  <arg name="respawn_delay"       default="30" />
  <arg name="clear_params"        default="true" />

  <node pkg="ublox_gps" type="ublox_gps" name="$(arg node_name)"
        output="$(arg output)"
        clear_params="$(arg clear_params)"
        respawn="$(arg respawn)"
        respawn_delay="$(arg respawn_delay)">
    <rosparam command="load"
              file="$(arg param_file_dir)/$(arg param_file_name).yaml" />
  </node>

</launch>
